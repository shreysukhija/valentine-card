<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Valentine</title>
	<style>
		:root {
			--pink: #ffd1e7;
			--box: #ffffff;
			--shadow: 0 18px 50px rgba(0, 0, 0, 0.18);
			--radius: 28px;
			--yes: #2ecc71;
			--no: #ff4d4f;
			--text: #3a2b33;
		}

		* { box-sizing: border-box; }
		html, body { height: 100%; }
		body {
			margin: 0;
			font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
			background: var(--pink);
			display: grid;
			place-items: center;
			color: var(--text);
			padding: 24px;
		}

		.card {
			width: min(660px, 94vw);
			min-height: 520px;
			background: var(--box);
			border-radius: var(--radius);
			box-shadow: var(--shadow);
			padding: 32px 32px 28px;
			position: relative;
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 16px;
			overflow: hidden;
		}

		.cat {
			width: 100%;
			max-width: 560px;
			height: 240px;
			border-radius: 18px;
			object-fit: cover;
			border: none;
			box-shadow: inset 0 0 0 1px rgba(0,0,0,.06), 0 10px 26px rgba(0,0,0,.12);
			margin-top: 0;
		}

		h1 {
			margin: 6px 0 10px;
			font-size: 26px;
			font-weight: 800;
			letter-spacing: 0.2px;
			text-align: center;
		}

		.controls {
			width: 100%;
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 14px;
			align-items: center;
			justify-items: center;
			margin-top: 4px;
		}

		button {
			appearance: none;
			border: none;
			cursor: pointer;
			border-radius: 50%;
			font-weight: 800;
			letter-spacing: 0.3px;
			transition: transform 120ms ease, filter 120ms ease;
			user-select: none;
		}
		button:active { transform: scale(0.98); }
		button:focus-visible { outline: 3px solid rgba(255, 74, 162, .35); outline-offset: 3px; }

		#yesBtn {
			background: var(--yes);
			color: white;
			width: 100px;
			height: 100px;
			position: relative;
			left: 0;
			top: 0;
			transition: left 220ms cubic-bezier(.2,.9,.25,1), top 220ms cubic-bezier(.2,.9,.25,1), transform 120ms ease, filter 120ms ease;
			box-shadow: 0 10px 18px rgba(46, 204, 113, .28);
		}
		#yesBtn:hover { filter: brightness(1.05); }

		#noBtn {
			background: var(--no);
			color: white;
			width: 100px; /* same size as Yes */
			height: 100px;
			box-shadow: 0 10px 18px rgba(255, 77, 79, .28);
		}
		#noBtn:hover { filter: brightness(1.02); transform: translateY(-1px); }

		.result {
			width: 100%;
			display: none;
			margin-top: 10px;
			padding: 14px 12px;
			border-radius: 18px;
			background: rgba(255, 74, 162, 0.10);
			text-align: center;
		}
		.result.show { display: block; }
		.result .yay {
			margin: 0 0 10px;
			font-weight: 900;
			font-size: 22px;
		}
		.result img {
			max-width: 220px;
			width: min(240px, 70%);
			height: auto;
			border-radius: 14px;
			box-shadow: 0 10px 22px rgba(0,0,0,.15);
		}

		.footer-note {
			margin-top: 6px;
			font-size: 12px;
			opacity: 0.6;
			text-align: center;
		}
	</style>
</head>
<body>
	<main class="card" id="card" aria-label="Valentine card">
		<img
			class="cat"
			src="paglu.png"
			alt="Cute cat"
		/>

		<h1>meri guchki puchki atku,</h1>
        <h1> would you be so kind to be my valentine?</h1>

		<section class="controls" aria-label="Choices">
			<button id="yesBtn" type="button">Yes</button>
			<button id="noBtn" type="button" aria-label="No (does not work)">No</button>
		</section>

		<section class="result" id="result" aria-live="polite">
			<p class="yay">oh yeaaaaaa</p>
			<img
				id="danceGif"
				src="https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif"
				alt="Dancing man"
			/>
		</section>

		<section class="result" id="sadResult" aria-live="polite">
			<p class="yay">ðŸ˜¢</p>
			<img
				src="https://media.giphy.com/media/6uGhT1O4sxpi8/giphy.gif"
				alt="Sad cat"
			/>
		</section>

		<div class="footer-note">(Yes button is shy)</div>
	</main>

	<script>
		const card = document.getElementById('card');
		const yesBtn = document.getElementById('yesBtn');
		const noBtn = document.getElementById('noBtn');
		const result = document.getElementById('result');
		const sadResult = document.getElementById('sadResult');

		let yesX = 0;
		let yesY = 0;
		let moveCount = 0;

		function clamp(n, min, max) {
			return Math.max(min, Math.min(max, n));
		}

		function moveYesAway() {
			if (moveCount >= 5) {
				return; // Stop moving after 3 times
			}

			// Constrain movement *inside* the white box in both X and Y directions.
			const cardRect = card.getBoundingClientRect();
			const btnRect = yesBtn.getBoundingClientRect();

			// Calculate allowed range for horizontal movement
			const maxLeft = (cardRect.right - btnRect.right) + yesX;
			const maxRight = (btnRect.left - cardRect.left) + yesX;
			const minX = -maxRight;
			const maxX = maxLeft;

			// Calculate allowed range for vertical movement
			const maxTop = (cardRect.bottom - btnRect.bottom) + yesY;
			const maxBottom = (btnRect.top - cardRect.top) + yesY;
			const minY = -maxBottom;
			const maxY = maxTop;

			// Random jump in both X and Y directions
			const jumpX = 100 + Math.random() * 200;
			const jumpY = 100 + Math.random() * 200;
			const dirX = Math.random() > 0.5 ? 1 : -1;
			const dirY = Math.random() > 0.5 ? 1 : -1;

			const targetX = clamp(yesX + dirX * jumpX, minX, maxX);
			const targetY = clamp(yesY + dirY * jumpY, minY, maxY);
			
			yesX = targetX;
			yesY = targetY;
			yesBtn.style.left = yesX + 'px';
			yesBtn.style.top = yesY + 'px';

			moveCount++;

			// Keep focus/hover from "catching" it; keep pointer behavior stable.
			yesBtn.blur();
		}

		// Yes: moves away 3 times, then shows message + gif.
		yesBtn.addEventListener('mouseenter', moveYesAway);
		yesBtn.addEventListener('mousemove', (e) => {
			// If the cursor keeps chasing it, keep dodging.
			// Throttle naturally via CSS transition + occasional moves.
			if (moveCount < 3 && Math.random() < 0.18) moveYesAway();
		});
		yesBtn.addEventListener('click', () => {
			if (moveCount >= 3) {
				result.classList.add('show');
			} else {
				moveYesAway();
			}
		});

		// No: shows sad cat gif.
		noBtn.addEventListener('click', () => {
			sadResult.classList.add('show');
		});

		// Keep it inside on resize.
		window.addEventListener('resize', () => {
			yesX = 0;
			yesY = 0;
			yesBtn.style.left = '0px';
			yesBtn.style.top = '0px';
		});
	</script>
</body>
</html>
